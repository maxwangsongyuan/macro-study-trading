<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Chart</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #chart-container { height: calc(100% - 32px); width: 100%; } /* Adjusted height for copyright */
        .tradingview-widget-copyright { text-align: center; font-size: 13px; color: #9db2bd; line-height: 32px; height: 32px; width: 100%; }
        .tradingview-widget-copyright .blue-text { color: #2962FF; }
        .tradingview-widget-copyright a { text-decoration: none; color: #9db2bd; }
        .tradingview-widget-copyright a:visited { color: #9db2bd; }
        .tradingview-widget-copyright a:hover { text-decoration: underline; color: #2962FF; }
    </style>
</head>
<body>

<!-- Container for the chart -->
<div id="chart-container"></div>

<!-- Copyright Notice -->
<div class="tradingview-widget-copyright">
    <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
        <span class="blue-text">Track all markets on TradingView</span>
    </a>
</div>

<!-- TradingView Core Library -->
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

<script type="text/javascript">
    // Function to get URL parameters
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Get the symbol from the URL
    const symbol = getQueryParam('symbol') || 'NASDAQ:AAPL'; // Default to AAPL if no symbol provided

    // Update the page title
    document.title = `${symbol} - Advanced Chart`;

    // Instantiate the TradingView Widget using tv.js library
    new TradingView.widget({
        "container_id": "chart-container", // Target the div
        "autosize": true,
        "symbol": symbol, // Use the symbol from the URL
        "timezone": "America/New_York",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "withdateranges": true,
        "range": "1D",
        "hide_side_toolbar": false,
        "allow_symbol_change": true, // Keep true for advanced chart
        "details": true,
        "hotlist": true,
        "show_popup_button": true,
        "popup_width": "1000",
        "popup_height": "650",
        "support_host": "https://www.tradingview.com"
    });
</script>

</body>
</html>
